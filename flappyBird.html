<html> 
 <head>
    <title></title> 
</head>
 <body>
    <p align="center"> 
      <canvas id="mycanvas"></canvas> 
    </p>
 </body> 
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
 <script>
var sketchProc = function(processingInstance) {
with (processingInstance) {
frameRate(30);
noStroke();
var GAMEMODE_STARTMENU = 0;
var GAMEMODE_PLAY = 1;
var GAMEMODE_GAMEOVER = 2;



var Bird = function() {
    this.x = 200;
    this.y = 200;
    this.width = 25;
    this.vdir = 0;
    
    this.draw = function() {
        fill(255, 218, 8);
        ellipse(this.x,this.y,this.width,this.width);
        fill(255, 136, 0);
        rect(this.x+6, this.y-2, 15, 5);
        fill(255, 255, 255);
        ellipse(this.x,this.y-5,5,5);
    };
    
    
    this.up = function(){
        if(this.y >= this.width){
            this.y = this.y - 15;
        }
    };
    this.down = function(){
        this.y = this.y + 2;
    };
};



var bird = new Bird();


var Barrier = function() {
    this.x = 366;
    this.y = 0;
    this.width = 25;
    this.vdir = 0;
    
    
    this.isTouching = function(bird){
        if(bird.x >= this.x && bird.x <= this.x+25 && bird.y >= this.y+250 && bird.y <= this.y+450){
            return 1;
        }
        if(bird.x >= this.x && bird.x <= this.x+25 && bird.y >= this.y-312 && bird.y <= (this.y-312)+450){
            return 1;
        }
        return 0;
    };

    this.draw = function() {
        fill(13, 122, 48);
        rect(this.x,this.y-312,this.width,450);
        rect(this.x,this.y+250,this.width,450);
    };


    this.step = function() {
        this.x = this.x-1;
    };
    
    this.upstep = function(){
        this.y = this.y-3;
    };
    
    this.upstep = function(){
        this.y = this.y-3;
    };
    this.downstep = function(){
        this.y = this.y+2;
    };
    
    this.vstep = function(){
        if(this.y < -140){
           this.vdir = 0;
        }
        else if(this.y > 150){
           this.vdir = 1;
        }
        if(this.vdir === 0){this.downstep();}
        else if(this.vdir === 1){this.upstep();}
    };
};


var proccessInputGameMode = function(){};
var proccessInputStartMenuMode = function(){};
var proccessInputGameOverMode = function(){};

var Game = function(){
    this.score = 0;
    this.mode = GAMEMODE_STARTMENU;
    this.bird = new Bird();
    this.barriers = [];
    this.frameCounter = 0;
    this.showStartMenu = function(){
        background(143, 212, 255);
        fill(255, 166, 0);
        rect(150,180,100,50);
        fill(255, 255, 255);
        textSize(30);
        var font = createFont("monospace");
        textFont(font);
        text('play',173,215);
        if(mouseX > 150 && mouseX < 250 && mouseY > 180 && mouseY < 230 && mouseIsPressed){return GAMEMODE_PLAY;}
        return GAMEMODE_STARTMENU;
    };
    this.showGameOverMenu = function(){
        background(143, 212, 255);
        fill(255, 166, 0);
        rect(150,180,100,50);
        fill(189, 83, 83);
        rect(129,115,145,43);
        fill(255, 255, 255);
        textSize(21);
        var font = createFont("monospace");
        textFont(font);
        text('your score was ' + this.score, 130,150);
        text('GAME OVER!',137,131);
        text('play again',157,214);
        if(mouseX > 150 && mouseX < 250 && mouseY > 180 && mouseY < 230 && mouseIsPressed){return GAMEMODE_PLAY;}
        return GAMEMODE_GAMEOVER;
        
    };
    this.initBoard = function(){
        this.frameCounter = 0;
        this.barriers = [];
        this.score = 0;
    };
    
    this.play = function(){
        background(143, 212, 255);
        text(this.score,20,20);
        if(this.frameCounter%220 === 0){
            if(this.frameCounter>1){this.score = this.score + 1;}
            var barrier = new Barrier(50, 1);
            this.barriers.push(barrier);
                
        }
        for(var j = 0; j < this.barriers.length; j++){
            this.barriers[j].draw();
            this.barriers[j].step();
            this.barriers[j].vstep();
            if(this.barriers[j].isTouching(this.bird)){
                return GAMEMODE_GAMEOVER;
            }
            
            
        }
        
        if (this.barriers.length === 10) {
            this.barriers.splice(0,1);
        }
        
        this.bird.draw();
        this.bird.down();
        this.frameCounter++;
        return GAMEMODE_PLAY;
    };
    this.setMode = function(mode){
        this.mode = mode;
        if(this.mode === GAMEMODE_PLAY){
            this.initBoard();
            keyPressed = proccessInputGameMode;
        }
    };
    
    this.run = function(){
        if(this.mode === GAMEMODE_PLAY){
            if(this.play() === GAMEMODE_GAMEOVER){
                this.setMode(GAMEMODE_GAMEOVER);
            }
        }
        else if(this.mode === GAMEMODE_STARTMENU){
            if(this.showStartMenu() === GAMEMODE_PLAY){
                this.setMode(GAMEMODE_PLAY);
            }
        }
        else if(this.mode === GAMEMODE_GAMEOVER){
            if(this.showGameOverMenu() === GAMEMODE_PLAY){
                this.setMode(GAMEMODE_PLAY);
            }
        }
    };
};




var game = new Game();

var proccessInputGameMode = function() {
    if(keyCode === 38){
        game.bird.up();
    }
    else if(keyCode === 40){
        game.bird.down();
    }
};


keyPressed = proccessInputGameMode;



draw = function() {
    game.run();
};













var canvas = document.getElementById("mycanvas"); 
var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>